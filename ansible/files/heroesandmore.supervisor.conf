[group:heroesandmore]
programs=heroesandmore_web,heroesandmore_celery,heroesandmore_celerybeat

[program:heroesandmore_web]
command=/home/www/heroesandmore/venv/bin/gunicorn app.wsgi:application -w 3 -b unix:/tmp/heroesandmore.sock --timeout 60 --keep-alive 5 --max-requests 1000 --max-requests-jitter 50
directory=/home/www/heroesandmore
user=www
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
redirect_stderr=true
stdout_logfile=/var/log/heroesandmore/heroesandmore.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10

[program:heroesandmore_celery]
command=/home/www/heroesandmore/venv/bin/celery -A app worker -l info --concurrency=2
directory=/home/www/heroesandmore
user=www
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
redirect_stderr=true
stdout_logfile=/var/log/heroesandmore/celery.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5

[program:heroesandmore_celerybeat]
command=/home/www/heroesandmore/venv/bin/celery -A app beat -l info --scheduler django_celery_beat.schedulers:DatabaseScheduler
directory=/home/www/heroesandmore
user=www
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
redirect_stderr=true
stdout_logfile=/var/log/heroesandmore/celerybeat.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
