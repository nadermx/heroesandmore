{% extends 'base.html' %}
{% load humanize %}

{% block title %}Official Auctions - HeroesAndMore{% endblock %}
{% block meta_description %}Browse official HeroesAndMore auction events. Premium collectibles, curated lots, and exclusive items auctioned by the platform.{% endblock %}

{% block content %}
<!-- Hero -->
<section class="py-5" style="background: linear-gradient(135deg, var(--dark) 0%, #1a1a2e 100%);">
    <div class="container text-center text-white py-4">
        <span class="badge bg-warning text-dark mb-3 px-3 py-2" style="font-size: 0.85rem;">
            <i class="bi bi-shield-check me-1"></i> Official Platform Events
        </span>
        <h1 class="fw-bold mb-3" style="font-size: 2.5rem;">HeroesAndMore Auctions</h1>
        <p class="text-white-50 mx-auto" style="max-width: 600px;">
            Curated auction events featuring premium collectibles, rare finds, and exclusive items sold directly by HeroesAndMore.
        </p>
    </div>
</section>

<!-- Live Events -->
{% if live_events %}
<section class="section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <span class="badge bg-danger me-2" style="font-size: 0.6em; vertical-align: middle;">LIVE</span>
                Live Auctions
            </h2>
        </div>
        <div class="row g-4">
            {% for event in live_events %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm" style="overflow: hidden;">
                    {% if event.cover_image %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}">
                        <img src="{{ event.cover_image.url }}" class="card-img-top" alt="{{ event.name }}" style="height: 200px; object-fit: cover; object-position: {{ event.cover_image_position_x }}% {{ event.cover_image_position_y }}%;">
                    </a>
                    {% else %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="d-flex align-items-center justify-content-center" style="height: 200px; background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);">
                        <i class="bi bi-hammer text-white" style="font-size: 3rem; opacity: 0.5;"></i>
                    </a>
                    {% endif %}
                    <div class="card-body">
                        <div class="d-flex align-items-center gap-2 mb-2">
                            <span class="badge bg-danger">Live Now</span>
                            {% if event.cadence %}
                            <span class="badge bg-secondary">{{ event.get_cadence_display }}</span>
                            {% endif %}
                        </div>
                        <h5 class="card-title fw-bold">
                            <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="text-decoration-none text-dark">
                                {{ event.name }}
                            </a>
                        </h5>
                        {% if event.description %}
                        <p class="text-muted small mb-3">{{ event.description|truncatewords:20 }}</p>
                        {% endif %}
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-muted small">
                                <i class="bi bi-collection"></i> {{ event.total_lots }} lot{{ event.total_lots|pluralize }}
                            </span>
                            <span class="text-danger small fw-bold">
                                <i class="bi bi-clock"></i>
                                Ends {{ event.bidding_end|naturaltime }}
                            </span>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pt-0">
                        <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="btn btn-dark w-100">
                            <i class="bi bi-hammer me-1"></i> Browse & Bid
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Upcoming Events -->
{% if upcoming_events %}
<section class="section {% if live_events %}section-alt{% endif %}">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <i class="bi bi-calendar-event" style="color: var(--primary);"></i>
                Upcoming Events
            </h2>
        </div>
        <div class="row g-4">
            {% for event in upcoming_events %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm" style="overflow: hidden;">
                    {% if event.cover_image %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}">
                        <img src="{{ event.cover_image.url }}" class="card-img-top" alt="{{ event.name }}" style="height: 200px; object-fit: cover; object-position: {{ event.cover_image_position_x }}% {{ event.cover_image_position_y }}%;">
                    </a>
                    {% else %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="d-flex align-items-center justify-content-center" style="height: 200px; background: var(--gray-100);">
                        <i class="bi bi-calendar-event" style="font-size: 3rem; color: var(--gray-300);"></i>
                    </a>
                    {% endif %}
                    <div class="card-body">
                        <div class="d-flex align-items-center gap-2 mb-2">
                            <span class="badge bg-info text-white">Upcoming</span>
                            {% if event.cadence %}
                            <span class="badge bg-secondary">{{ event.get_cadence_display }}</span>
                            {% endif %}
                        </div>
                        <h5 class="card-title fw-bold">
                            <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="text-decoration-none text-dark">
                                {{ event.name }}
                            </a>
                        </h5>
                        {% if event.description %}
                        <p class="text-muted small mb-3">{{ event.description|truncatewords:20 }}</p>
                        {% endif %}
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-muted small">
                                <i class="bi bi-collection"></i> {{ event.total_lots }} lot{{ event.total_lots|pluralize }}
                            </span>
                            <span class="text-primary small fw-bold">
                                <i class="bi bi-clock"></i>
                                Starts {{ event.bidding_start|naturaltime }}
                            </span>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pt-0">
                        <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="btn btn-outline-dark w-100">
                            <i class="bi bi-eye me-1"></i> Preview Lots
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Past Events -->
{% if past_events %}
<section class="section section-alt">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <i class="bi bi-archive" style="color: var(--gray-500);"></i>
                Past Events
            </h2>
        </div>
        <div class="row g-4">
            {% for event in past_events %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 border-0 shadow-sm" style="overflow: hidden; opacity: 0.85;">
                    {% if event.cover_image %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}">
                        <img src="{{ event.cover_image.url }}" class="card-img-top" alt="{{ event.name }}" style="height: 200px; object-fit: cover; object-position: {{ event.cover_image_position_x }}% {{ event.cover_image_position_y }}%; filter: grayscale(30%);">
                    </a>
                    {% else %}
                    <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="d-flex align-items-center justify-content-center" style="height: 200px; background: var(--gray-200);">
                        <i class="bi bi-archive" style="font-size: 3rem; color: var(--gray-400);"></i>
                    </a>
                    {% endif %}
                    <div class="card-body">
                        <span class="badge bg-secondary mb-2">Ended</span>
                        <h5 class="card-title fw-bold">
                            <a href="{% url 'marketplace:platform_auction_detail' slug=event.slug %}" class="text-decoration-none text-dark">
                                {{ event.name }}
                            </a>
                        </h5>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-muted small">
                                {{ event.total_lots }} lot{{ event.total_lots|pluralize }}
                            </span>
                            <span class="text-muted small">
                                Ended {{ event.bidding_end|naturaltime }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Trusted Seller Callout -->
<section class="py-4" style="background: var(--gray-50);">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 p-3 rounded" style="background: #fff; border: 1px solid var(--border-color);">
            <div class="d-flex align-items-center gap-3">
                <span class="badge px-2 py-2" style="background: linear-gradient(135deg, #D4A017, #B8860B); color: #fff;">
                    <i class="bi bi-award" style="font-size: 1rem;"></i>
                </span>
                <div>
                    <div class="fw-bold" style="font-size: 0.95rem;">Are you a Trusted Seller?</div>
                    <div class="text-muted small">Submit your items for our next official auction event.</div>
                </div>
            </div>
            <a href="{% url 'trusted_seller' %}" class="btn btn-outline-dark btn-sm">Learn More</a>
        </div>
    </div>
</section>

<!-- No Events -->
{% if not live_events and not upcoming_events and not past_events %}
<section class="section">
    <div class="container text-center py-5">
        <i class="bi bi-hammer" style="font-size: 4rem; color: var(--gray-300);"></i>
        <h3 class="mt-3 mb-2">No Auction Events Yet</h3>
        <p class="text-muted">Official platform auction events will be announced here. Check back soon!</p>
        <a href="{% url 'marketplace:listing_list' %}?type=auction" class="btn btn-outline-dark">
            Browse Community Auctions
        </a>
    </div>
</section>
{% endif %}
{% endblock %}
