<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
    <h2 style="color: #e74c3c;">Payment Failed</h2>

    <p>Hi {{ user.first_name|default:user.username }},</p>

    <p>We were unable to charge your payment method for your <strong>{{ tier_info.name }}</strong> subscription.</p>

    <div style="background-color: #fdf2f2; border-left: 4px solid #e74c3c; padding: 12px 16px; margin: 20px 0;">
        <strong>Error:</strong> {{ error_message }}
    </div>

    <p>Your subscription is still active, but please update your payment method to avoid service interruption.</p>

    {% if grace_period_end %}
    <p style="color: #e67e22; font-weight: bold;">
        You have until {{ grace_period_end|date:"F j, Y" }} to update your payment method before your subscription is downgraded to the Starter tier.
    </p>
    {% endif %}

    <p style="text-align: center; margin: 30px 0;">
        <a href="{{ update_payment_url }}"
           style="background-color: #e74c3c; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">
            Update Payment Method
        </a>
    </p>

    <p>Thanks,<br>The HeroesAndMore Team</p>
</body>
</html>
